{"version":3,"file":"component---src-pages-cards-tsx-df40373d40bf517154bb.js","mappings":"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","sources":["webpack://tpcstld-site/./node_modules/classnames/index.js","webpack://tpcstld-site/./src/info-pages/PageWrapper.module.css","webpack://tpcstld-site/./src/info-pages/PageWrapper.tsx","webpack://tpcstld-site/./src/cards/CardsPage.tsx","webpack://tpcstld-site/./src/cards/CardsPage.module.css","webpack://tpcstld-site/./src/pages/cards.tsx"],"sourcesContent":["/*!\n  Copyright (c) 2018 Jed Watson.\n  Licensed under the MIT License (MIT), see\n  http://jedwatson.github.io/classnames\n*/\n\n/* global define */\n(function () {\n  'use strict';\n\n  var hasOwn = {}.hasOwnProperty;\n\n  function classNames() {\n    var classes = [];\n\n    for (var i = 0; i < arguments.length; i++) {\n      var arg = arguments[i];\n      if (!arg) continue;\n      var argType = typeof arg;\n\n      if (argType === 'string' || argType === 'number') {\n        classes.push(arg);\n      } else if (Array.isArray(arg)) {\n        if (arg.length) {\n          var inner = classNames.apply(null, arg);\n\n          if (inner) {\n            classes.push(inner);\n          }\n        }\n      } else if (argType === 'object') {\n        if (arg.toString === Object.prototype.toString) {\n          for (var key in arg) {\n            if (hasOwn.call(arg, key) && arg[key]) {\n              classes.push(key);\n            }\n          }\n        } else {\n          classes.push(arg.toString());\n        }\n      }\n    }\n\n    return classes.join(' ');\n  }\n\n  if (typeof module !== 'undefined' && module.exports) {\n    classNames.default = classNames;\n    module.exports = classNames;\n  } else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n    // register as 'classnames', consistent with npm package name\n    define('classnames', [], function () {\n      return classNames;\n    });\n  } else {\n    window.classNames = classNames;\n  }\n})();","// extracted by mini-css-extract-plugin\nexport default {\"outerContainer\":\"PageWrapper-module--outerContainer--zN1eq\",\"container\":\"PageWrapper-module--container--JDwBF\"};","import {ReactNode} from 'react';\n\nimport styles from './PageWrapper.module.css';\n\ninterface PageWrapperProps {\n  children: ReactNode;\n}\n\nexport default function PageWrapper({children}: PageWrapperProps) {\n  return (\n    <div className={styles.outerContainer}>\n      <div className={styles.container}>{children}</div>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport {Fragment, useEffect, useState} from 'react';\nimport {Helmet} from 'react-helmet';\nimport PageWrapper from '../info-pages/PageWrapper';\n\nimport styles from './CardsPage.module.css';\n\nenum Side {\n  LEFT = 'left',\n  RIGHT = 'right',\n}\n\nconst LOCALSTORAGE_KEY = 'save';\n\ninterface ButtonPairProps {\n  value: number;\n  selectedSide: Side | null;\n  onSideSelected: (side: Side) => void;\n}\n\nfunction ButtonPair({value, selectedSide, onSideSelected}: ButtonPairProps) {\n  const content = value > 0 ? `+${value}` : `${value}`;\n\n  return (\n    <>\n      <button\n        className={classNames(styles.button, {\n          [styles.selectedButton]: selectedSide === Side.LEFT,\n        })}\n        onClick={() => onSideSelected(Side.LEFT)}\n      >\n        {content}\n      </button>\n      <button\n        className={classNames(styles.button, {\n          [styles.selectedButton]: selectedSide === Side.RIGHT,\n        })}\n        onClick={() => onSideSelected(Side.RIGHT)}\n      >\n        {content}\n      </button>\n    </>\n  );\n}\n\nconst BUTTON_VALUES = [8, 4, 2, -2, -4, -8];\nconst DEFAULT_SIDES = [null, null, null, null, null, null];\n\nfunction calculatePendingScore(\n  selectedSides: Array<Side | null>\n): Record<Side, number> {\n  const result = {\n    [Side.LEFT]: 0,\n    [Side.RIGHT]: 0,\n  };\n\n  for (let xx = 0; xx < BUTTON_VALUES.length; xx++) {\n    const value = BUTTON_VALUES[xx];\n    const side = selectedSides[xx];\n    if (side == null) {\n      continue;\n    }\n\n    result[side] = result[side] + value;\n  }\n\n  return result;\n}\n\nexport default function CardsPage() {\n  const [leftScore, setLeftScore] = useState(0);\n  const [rightScore, setRightScore] = useState(0);\n  const [history, setHistory] = useState<Array<Record<Side, number>>>([]);\n  const [tryLoad, setTryLoad] = useState(false);\n\n  const [selectedSides, setSelectedSides] =\n    useState<Array<Side | null>>(DEFAULT_SIDES);\n\n  const pendingScores = calculatePendingScore(selectedSides);\n\n  const allPendingScoresOk =\n    selectedSides.findIndex((side) => side == null) == -1;\n\n  useEffect(() => {\n    const data = window.localStorage.getItem(LOCALSTORAGE_KEY);\n    if (data == null) {\n      setTryLoad(true);\n      return;\n    }\n    const parsed = JSON.parse(data);\n    setLeftScore(parsed.leftScore);\n    setRightScore(parsed.rightScore);\n    setHistory(parsed.history);\n\n    setTryLoad(true);\n  }, []);\n\n  useEffect(() => {\n    if (!tryLoad) {\n      return;\n    }\n\n    window.localStorage.setItem(\n      LOCALSTORAGE_KEY,\n      JSON.stringify({\n        version: 1,\n        leftScore,\n        rightScore,\n        history,\n      })\n    );\n  }, [leftScore, rightScore, history]);\n\n  function handleCommit() {\n    if (!allPendingScoresOk) {\n      return;\n    }\n\n    setHistory([pendingScores, ...history]);\n    setLeftScore(leftScore + Math.max(0, pendingScores[Side.LEFT]));\n    setRightScore(rightScore + Math.max(0, pendingScores[Side.RIGHT]));\n    setSelectedSides(DEFAULT_SIDES);\n  }\n\n  const [resetConfirm, setResetConfirm] = useState(false);\n  useEffect(() => {\n    if (!resetConfirm) {\n      return;\n    }\n    const timeoutId = setTimeout(() => setResetConfirm(false), 5000);\n    return () => clearTimeout(timeoutId);\n  }, [resetConfirm]);\n  function handleReset() {\n    if (!resetConfirm) {\n      setResetConfirm(true);\n      return;\n    }\n\n    setLeftScore(0);\n    setRightScore(0);\n    setHistory([]);\n    setSelectedSides(DEFAULT_SIDES);\n    setResetConfirm(false);\n    window.localStorage.removeItem(LOCALSTORAGE_KEY);\n  }\n  return (\n    <PageWrapper>\n      <Helmet htmlAttributes={{lang: 'en'}}>\n        <title>Card Calculator</title>\n        <meta\n          name=\"description\"\n          content=\"Helping a friend keep track of card scores.\"\n        />\n      </Helmet>\n      <div className={styles.outerContainer}>\n        <h1>Card Calculator</h1>\n        <button className={styles.resetButton} onClick={handleReset}>\n          {resetConfirm ? 'Confirm' : 'Reset'}\n        </button>\n        <div className={styles.container}>\n          {BUTTON_VALUES.map((value, index) => (\n            <ButtonPair\n              key={value}\n              value={value}\n              selectedSide={selectedSides[index]}\n              onSideSelected={(side) => {\n                const newSides = [...selectedSides];\n                newSides[index] = side;\n                setSelectedSides(newSides);\n              }}\n            />\n          ))}\n\n          <div className={styles.pendingScore}>{pendingScores[Side.LEFT]}</div>\n          <div className={styles.pendingScore}>{pendingScores[Side.RIGHT]}</div>\n          <button\n            className={classNames(styles.commit, styles.button)}\n            onClick={handleCommit}\n            disabled={!allPendingScoresOk}\n          >\n            Done\n          </button>\n        </div>\n        <h2>Scores</h2>\n        <div className={styles.container}>\n          <span>\n            Team 1: <b>{leftScore}</b>\n          </span>\n          <span>\n            Team 2: <b>{rightScore}</b>\n          </span>\n        </div>\n        <h2>History</h2>\n        <div className={styles.container}>\n          {history.map((element, index) => (\n            <Fragment key={index}>\n              <span>{element[Side.LEFT]}</span>\n              <span>{element[Side.RIGHT]}</span>\n            </Fragment>\n          ))}\n        </div>\n      </div>\n    </PageWrapper>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"outerContainer\":\"CardsPage-module--outerContainer--STVZQ\",\"container\":\"CardsPage-module--container--DupE4\",\"button\":\"CardsPage-module--button--IoKue\",\"selectedButton\":\"CardsPage-module--selectedButton--L0lPf\",\"pendingScore\":\"CardsPage-module--pendingScore--d0POs\",\"commit\":\"CardsPage-module--commit--pi5lO\",\"resetButton\":\"CardsPage-module--resetButton--LeBzv\"};","import CardsPage from '../cards/CardsPage';\n\nexport default CardsPage;\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","key","call","join","module","exports","default","PageWrapper","children","className","styles","Side","LOCALSTORAGE_KEY","ButtonPair","value","selectedSide","onSideSelected","content","LEFT","onClick","RIGHT","BUTTON_VALUES","DEFAULT_SIDES","useState","leftScore","setLeftScore","rightScore","setRightScore","history","setHistory","tryLoad","setTryLoad","selectedSides","setSelectedSides","pendingScores","result","xx","side","calculatePendingScore","allPendingScoresOk","findIndex","useEffect","data","window","localStorage","getItem","parsed","JSON","parse","setItem","stringify","version","resetConfirm","setResetConfirm","timeoutId","setTimeout","clearTimeout","Helmet","htmlAttributes","lang","name","removeItem","map","index","newSides","Math","max","disabled","element","Fragment"],"sourceRoot":""}