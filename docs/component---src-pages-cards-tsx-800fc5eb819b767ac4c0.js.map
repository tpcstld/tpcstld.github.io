{"version":3,"file":"component---src-pages-cards-tsx-800fc5eb819b767ac4c0.js","mappings":"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","sources":["webpack://tpcstld-site/./node_modules/classnames/index.js","webpack://tpcstld-site/./src/info-pages/PageWrapper.module.css","webpack://tpcstld-site/./src/info-pages/PageWrapper.tsx","webpack://tpcstld-site/./src/cards/CardsPage.tsx","webpack://tpcstld-site/./src/cards/CardsPage.module.css","webpack://tpcstld-site/./src/pages/cards.tsx"],"sourcesContent":["/*!\n\tCopyright (c) 2018 Jed Watson.\n\tLicensed under the MIT License (MIT), see\n\thttp://jedwatson.github.io/classnames\n*/\n/* global define */\n\n(function () {\n\t'use strict';\n\n\tvar hasOwn = {}.hasOwnProperty;\n\tvar nativeCodeString = '[native code]';\n\n\tfunction classNames() {\n\t\tvar classes = [];\n\n\t\tfor (var i = 0; i < arguments.length; i++) {\n\t\t\tvar arg = arguments[i];\n\t\t\tif (!arg) continue;\n\n\t\t\tvar argType = typeof arg;\n\n\t\t\tif (argType === 'string' || argType === 'number') {\n\t\t\t\tclasses.push(arg);\n\t\t\t} else if (Array.isArray(arg)) {\n\t\t\t\tif (arg.length) {\n\t\t\t\t\tvar inner = classNames.apply(null, arg);\n\t\t\t\t\tif (inner) {\n\t\t\t\t\t\tclasses.push(inner);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (argType === 'object') {\n\t\t\t\tif (arg.toString !== Object.prototype.toString && !arg.toString.toString().includes('[native code]')) {\n\t\t\t\t\tclasses.push(arg.toString());\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tfor (var key in arg) {\n\t\t\t\t\tif (hasOwn.call(arg, key) && arg[key]) {\n\t\t\t\t\t\tclasses.push(key);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn classes.join(' ');\n\t}\n\n\tif (typeof module !== 'undefined' && module.exports) {\n\t\tclassNames.default = classNames;\n\t\tmodule.exports = classNames;\n\t} else if (typeof define === 'function' && typeof define.amd === 'object' && define.amd) {\n\t\t// register as 'classnames', consistent with npm package name\n\t\tdefine('classnames', [], function () {\n\t\t\treturn classNames;\n\t\t});\n\t} else {\n\t\twindow.classNames = classNames;\n\t}\n}());\n","// extracted by mini-css-extract-plugin\nexport default {\"outerContainer\":\"PageWrapper-module--outerContainer--ccdd5\",\"container\":\"PageWrapper-module--container--243c0\"};","import {ReactNode} from 'react';\n\nimport styles from './PageWrapper.module.css';\n\ninterface PageWrapperProps {\n  children: ReactNode;\n}\n\nexport default function PageWrapper({children}: PageWrapperProps) {\n  return (\n    <div className={styles.outerContainer}>\n      <div className={styles.container}>{children}</div>\n    </div>\n  );\n}\n","import classNames from 'classnames';\nimport {Fragment, useEffect, useState} from 'react';\nimport {Helmet} from 'react-helmet';\nimport PageWrapper from '../info-pages/PageWrapper';\n\nimport styles from './CardsPage.module.css';\n\nenum Side {\n  LEFT = 'left',\n  RIGHT = 'right',\n}\n\nconst LOCALSTORAGE_KEY = 'save';\n\ninterface ButtonPairProps {\n  value: number;\n  selectedSide: Side | null;\n  onSideSelected: (side: Side) => void;\n}\n\nfunction ButtonPair({value, selectedSide, onSideSelected}: ButtonPairProps) {\n  const content = value > 0 ? `+${value}` : `${value}`;\n\n  return (\n    <>\n      <button\n        className={classNames(styles.button, {\n          [styles.selectedButton]: selectedSide === Side.LEFT,\n        })}\n        onClick={() => onSideSelected(Side.LEFT)}\n      >\n        {content}\n      </button>\n      <button\n        className={classNames(styles.button, {\n          [styles.selectedButton]: selectedSide === Side.RIGHT,\n        })}\n        onClick={() => onSideSelected(Side.RIGHT)}\n      >\n        {content}\n      </button>\n    </>\n  );\n}\n\nconst BUTTON_VALUES = [8, 4, 2, -2, -4, -8];\nconst DEFAULT_SIDES = [null, null, null, null, null, null];\n\nfunction calculatePendingScore(\n  selectedSides: Array<Side | null>\n): Record<Side, number> {\n  const result = {\n    [Side.LEFT]: 0,\n    [Side.RIGHT]: 0,\n  };\n\n  for (let xx = 0; xx < BUTTON_VALUES.length; xx++) {\n    const value = BUTTON_VALUES[xx];\n    const side = selectedSides[xx];\n    if (side == null) {\n      continue;\n    }\n\n    result[side] = result[side] + value;\n  }\n\n  return result;\n}\n\nexport default function CardsPage() {\n  const [leftScore, setLeftScore] = useState(0);\n  const [rightScore, setRightScore] = useState(0);\n  const [history, setHistory] = useState<Array<Record<Side, number>>>([]);\n  const [tryLoad, setTryLoad] = useState(false);\n\n  const [selectedSides, setSelectedSides] =\n    useState<Array<Side | null>>(DEFAULT_SIDES);\n\n  const pendingScores = calculatePendingScore(selectedSides);\n\n  const allPendingScoresOk =\n    selectedSides.findIndex((side) => side == null) == -1;\n\n  useEffect(() => {\n    const data = window.localStorage.getItem(LOCALSTORAGE_KEY);\n    if (data == null) {\n      setTryLoad(true);\n      return;\n    }\n    const parsed = JSON.parse(data);\n    setLeftScore(parsed.leftScore);\n    setRightScore(parsed.rightScore);\n    setHistory(parsed.history);\n\n    setTryLoad(true);\n  }, []);\n\n  useEffect(() => {\n    if (!tryLoad) {\n      return;\n    }\n\n    window.localStorage.setItem(\n      LOCALSTORAGE_KEY,\n      JSON.stringify({\n        version: 1,\n        leftScore,\n        rightScore,\n        history,\n      })\n    );\n  }, [leftScore, rightScore, history]);\n\n  function handleCommit() {\n    if (!allPendingScoresOk) {\n      return;\n    }\n\n    setHistory([pendingScores, ...history]);\n    setLeftScore(leftScore + Math.max(0, pendingScores[Side.LEFT]));\n    setRightScore(rightScore + Math.max(0, pendingScores[Side.RIGHT]));\n    setSelectedSides(DEFAULT_SIDES);\n  }\n\n  const [resetConfirm, setResetConfirm] = useState(false);\n  useEffect(() => {\n    if (!resetConfirm) {\n      return;\n    }\n    const timeoutId = setTimeout(() => setResetConfirm(false), 5000);\n    return () => clearTimeout(timeoutId);\n  }, [resetConfirm]);\n  function handleReset() {\n    if (!resetConfirm) {\n      setResetConfirm(true);\n      return;\n    }\n\n    setLeftScore(0);\n    setRightScore(0);\n    setHistory([]);\n    setSelectedSides(DEFAULT_SIDES);\n    setResetConfirm(false);\n    window.localStorage.removeItem(LOCALSTORAGE_KEY);\n  }\n  return (\n    <PageWrapper>\n      <Helmet htmlAttributes={{lang: 'en'}}>\n        <title>Card Calculator</title>\n        <meta\n          name=\"description\"\n          content=\"Helping a friend keep track of card scores.\"\n        />\n      </Helmet>\n      <div className={styles.outerContainer}>\n        <h1>Card Calculator</h1>\n        <button className={styles.resetButton} onClick={handleReset}>\n          {resetConfirm ? 'Confirm' : 'Reset'}\n        </button>\n        <div className={styles.container}>\n          {BUTTON_VALUES.map((value, index) => (\n            <ButtonPair\n              key={value}\n              value={value}\n              selectedSide={selectedSides[index]}\n              onSideSelected={(side) => {\n                const newSides = [...selectedSides];\n                newSides[index] = side;\n                setSelectedSides(newSides);\n              }}\n            />\n          ))}\n\n          <div className={styles.pendingScore}>{pendingScores[Side.LEFT]}</div>\n          <div className={styles.pendingScore}>{pendingScores[Side.RIGHT]}</div>\n          <button\n            className={classNames(styles.commit, styles.button)}\n            onClick={handleCommit}\n            disabled={!allPendingScoresOk}\n          >\n            Done\n          </button>\n        </div>\n        <h2>Scores</h2>\n        <div className={styles.container}>\n          <span>\n            Team 1: <b>{leftScore}</b>\n          </span>\n          <span>\n            Team 2: <b>{rightScore}</b>\n          </span>\n        </div>\n        <h2>History</h2>\n        <div className={styles.container}>\n          {history.map((element, index) => (\n            <Fragment key={index}>\n              <span>{element[Side.LEFT]}</span>\n              <span>{element[Side.RIGHT]}</span>\n            </Fragment>\n          ))}\n        </div>\n      </div>\n    </PageWrapper>\n  );\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"outerContainer\":\"CardsPage-module--outerContainer--49355\",\"container\":\"CardsPage-module--container--0eea4\",\"button\":\"CardsPage-module--button--2282a\",\"selectedButton\":\"CardsPage-module--selectedButton--2f494\",\"pendingScore\":\"CardsPage-module--pendingScore--7743c\",\"commit\":\"CardsPage-module--commit--a62e6\",\"resetButton\":\"CardsPage-module--resetButton--2de07\"};","import CardsPage from '../cards/CardsPage';\n\nexport default CardsPage;\n"],"names":["hasOwn","hasOwnProperty","classNames","classes","i","arguments","length","arg","argType","push","Array","isArray","inner","apply","toString","Object","prototype","includes","key","call","join","module","exports","default","PageWrapper","children","_jsx","className","styles","Side","LOCALSTORAGE_KEY","ButtonPair","value","selectedSide","onSideSelected","content","_jsxs","LEFT","onClick","RIGHT","BUTTON_VALUES","DEFAULT_SIDES","useState","leftScore","setLeftScore","rightScore","setRightScore","history","setHistory","tryLoad","setTryLoad","selectedSides","setSelectedSides","pendingScores","result","xx","side","calculatePendingScore","allPendingScoresOk","findIndex","useEffect","data","window","localStorage","getItem","parsed","JSON","parse","setItem","stringify","version","resetConfirm","setResetConfirm","timeoutId","setTimeout","clearTimeout","Helmet","htmlAttributes","lang","name","removeItem","map","index","newSides","Math","max","disabled","element","Fragment"],"sourceRoot":""}